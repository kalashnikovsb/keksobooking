{"version":3,"file":"main.bundle.js","mappings":"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","sources":["webpack://keksobooking/./js/api.js","webpack://keksobooking/./js/popups.js","webpack://keksobooking/./js/mainForm.js","webpack://keksobooking/./js/filterForm.js","webpack://keksobooking/./js/utils.js","webpack://keksobooking/./js/page.js","webpack://keksobooking/./js/offer.js","webpack://keksobooking/./js/map.js"],"sourcesContent":["let offers = [];\n\nconst getData = (onSuccess, onError) => {\n  fetch('https://23.javascript.pages.academy/keksobooking/data')\n    .then((response) => {\n      if (response.ok) {\n        return response.json();\n      } else {\n        throw Error(response.status);\n      }\n    })\n    .then((response) => {\n      offers = response.slice();\n      onSuccess(response);\n    })\n    .catch((message) => {\n      onError(`Ошибка загрузки данных. ${message}`);\n    });\n};\n\nconst sendData = (onSuccess, onError, body) => {\n  fetch('https://23.javascript.pages.academy/keksobooking',\n    {\n      method: 'POST',\n      body,\n    })\n    .then((response) => {\n      if (response.ok) {\n        onSuccess();\n      } else {\n        throw Error();\n      }\n    })\n    .catch(() => {\n      onError();\n    });\n};\n\nexport {getData, sendData, offers};\n","const successPopup = document.querySelector('#success').content.querySelector('.success');\nconst errorPopup = document.querySelector('#error').content.querySelector('.error');\n\nconst bodyElement = document.querySelector('body');\n\nconst showSuccessPopup = () => {\n  bodyElement.appendChild(successPopup);\n};\n\nconst showErrorPopup = () => {\n  bodyElement.appendChild(errorPopup);\n};\n\nconst removePopups = () => {\n  successPopup.remove();\n  errorPopup.remove();\n};\n\nwindow.addEventListener('keydown', (evt) => {\n  if (evt.code === 'Escape') {\n    removePopups();\n  }\n});\n\nwindow.addEventListener('click', () => {\n  removePopups();\n});\n\nsuccessPopup.style.zIndex = 1000;\nerrorPopup.style.zIndex = 1000;\n\nexport {showSuccessPopup, showErrorPopup};\n","import {sendData} from './api.js'\nimport {setPageToDefault} from './page.js'\nimport {showSuccessPopup, showErrorPopup} from './popups.js';\n\nconst mainForm = document.querySelector('.ad-form');\nconst formReset = document.querySelector('.ad-form__reset');\nconst housingTitle = mainForm.querySelector('#title');\nconst housingPrice = mainForm.querySelector('#price');\nconst housingType = mainForm.querySelector('#type');\nconst housingTimeIn = mainForm.querySelector('#timein');\nconst housingTimeOut = mainForm.querySelector('#timeout');\nconst housingAddress = mainForm.querySelector('#address');\nconst housingRoomNumber = mainForm.querySelector('#room_number');\nconst housingCapacity = mainForm.querySelector('#capacity');\nconst avatarInput = mainForm.querySelector('#avatar');\nconst avatarImage = mainForm.querySelector('.ad-form-header__preview > img');\nconst housingInput = mainForm.querySelector('#images');\nconst housingImages = mainForm.querySelector('.ad-form__photo');\n\nconst FILE_TYPES = ['gif', 'jpg', 'jpeg', 'png'];\nconst MIN_LENGTH_TITLE = 30;\nconst MAX_LENGTH_TITLE = 1000;\nconst MIN_PRICE = 0;\nconst MAX_PRICE = 1000000;\n\n\nconst MinPricesOfTypes = {\n  'bungalow': 0,\n  'flat': 1000,\n  'hotel': 3000,\n  'house': 5000,\n  'palace': 10000,\n};\n\nconst adjustTitle = () => {\n  const valueLength = housingTitle.value.length;\n  if (valueLength < MIN_LENGTH_TITLE) {\n    housingTitle.setCustomValidity(`Заголовок объявления должен содержать минимум ${MIN_LENGTH_TITLE} символов. Добавьте ${MIN_LENGTH_TITLE - housingTitle.value.length} символов`);\n  } else if (valueLength > MAX_LENGTH_TITLE) {\n    housingTitle.setCustomValidity(`Заголовок объявления должен содержать максимум ${MAX_LENGTH_TITLE} символов. Удалите ${housingTitle.value.length - MAX_LENGTH_TITLE} символов`);\n  } else {\n    housingTitle.setCustomValidity('');\n  }\n  housingTitle.reportValidity();\n};\n\nconst adjustPrice = () => {\n  const minValue = MinPricesOfTypes[housingType.value];\n  const currentValue = housingPrice.value;\n  housingPrice.placeholder = minValue;\n  housingPrice.min = minValue;\n  if (currentValue < minValue || currentValue < MIN_PRICE) {\n    housingPrice.setCustomValidity(`Цена не может быть ниже ${minValue}`);\n  } else if (currentValue > MAX_PRICE) {\n    housingPrice.setCustomValidity(`Цена не может быть выше ${MAX_PRICE}`);\n  } else {\n    housingPrice.setCustomValidity('');\n  }\n  housingPrice.reportValidity();\n};\n\nconst adjustTime = (evt) => {\n  const targetSelectElement = (evt.target.id === 'timein') ? housingTimeOut : housingTimeIn;\n  targetSelectElement.value = evt.target.value;\n};\n\nconst adjustCapacity = () => {\n  const rooms = +housingRoomNumber.value;\n  const capacity = +housingCapacity.value;\n\n  if (rooms === 100 && capacity === 0) {\n    housingCapacity.setCustomValidity('');\n  } else if (rooms >= capacity && rooms !== 100 && capacity !== 0) {\n    housingCapacity.setCustomValidity('');\n  } else {\n    switch (rooms) {\n      case 1:\n        housingCapacity.setCustomValidity('Количество комнат подходит только 1 гостю');\n        break;\n      case 2:\n        housingCapacity.setCustomValidity('Количество комнат подходит 1 или 2 гостям');\n        break;\n      case 3:\n        housingCapacity.setCustomValidity('Количество комнат подходит для 1, 2 или 3 гостей');\n        break;\n      case 100:\n        housingCapacity.setCustomValidity('Такое количество комнат не подходит для гостей');\n    }\n  }\n  housingCapacity.reportValidity();\n};\n\nconst setAddress = (value) => {\n  housingAddress.value = `${value.lat}, ${value.lng}`;\n};\n\nconst resetMainForm = () => {\n  mainForm.reset();\n  adjustPrice();\n};\n\nhousingTitle.addEventListener('input', adjustTitle);\nhousingType.addEventListener('change', adjustPrice);\nhousingPrice.addEventListener('input', adjustPrice);\nhousingTimeIn.addEventListener('change', adjustTime);\nhousingTimeOut.addEventListener('change', adjustTime);\nhousingRoomNumber.addEventListener('change', adjustCapacity);\nhousingCapacity.addEventListener('change', adjustCapacity);\n\nmainForm.addEventListener('submit', (evt) => {\n  evt.preventDefault();\n  sendData(\n    () => {\n      setPageToDefault();\n      showSuccessPopup();\n    },\n    showErrorPopup,\n    new FormData(evt.target),\n  );\n});\n\nformReset.addEventListener('click', (evt) => {\n  evt.preventDefault();\n  setPageToDefault();\n});\n\navatarInput.addEventListener('change', () => {\n  const file = avatarInput.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((fileType) => {\n    return fileName.endsWith(fileType);\n  });\n\n  if(matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      avatarImage.src = reader.result;\n    });\n    reader.readAsDataURL(file);\n  }\n});\n\nhousingInput.addEventListener('change', () => {\n  const file = housingInput.files[0];\n  const fileName = file.name.toLowerCase();\n  const matches = FILE_TYPES.some((fileType) => {\n    return fileName.endsWith(fileType);\n  });\n\n  if(matches) {\n    const reader = new FileReader();\n    reader.addEventListener('load', () => {\n      const housingImage = document.createElement('img');\n      housingImage.src = reader.result;\n      housingImage.width = 70;\n      housingImage.height = 70;\n      housingImage.alt = 'Фотография жилья';\n      housingImages.appendChild(housingImage);\n    });\n    reader.readAsDataURL(file);\n  }\n});\n\nexport {setAddress, resetMainForm};\n","import {offers} from './api.js';\nimport {refreshMarkers} from './map.js';\nimport {debounce} from './utils.js';\n\nconst filterForm = document.querySelector('.map__filters');\n\nconst LOW_PRICE = 10000;\nconst HIGH_PRICE = 50000;\n\nconst resetFilterForm = () => {\n  filterForm.reset();\n};\n\nconst filterByType = (offer, value) => {\n  const {type} = offer.offer;\n  if (value === 'any') {\n    return true;\n  } else {\n    return type === currentFilter.type;\n  }\n};\n\nconst filterByPrice = (offer, value) => {\n  const {price} = offer.offer;\n  switch(value) {\n    case 'any':\n      return true;\n    case 'low':\n      return price < LOW_PRICE ? true : false;\n    case 'high':\n      return price > HIGH_PRICE ? true : false;\n    default:\n      return price >= LOW_PRICE && price <= HIGH_PRICE ? true : false;\n  }\n};\n\nconst filterByRooms = (offer, value) => {\n  const {rooms} = offer.offer;\n  if (value === 'any') {\n    return true;\n  } else {\n    return rooms === +value;\n  }\n};\n\nconst filterByGuests = (offer, value) => {\n  const {guests} = offer.offer;\n  return (value === 'any' || guests === +value) ? true : false;\n};\n\nconst filterByFeatures = (offer, isNecessary, feature) => {\n  const {features} = offer.offer;\n  if (!features && isNecessary) {\n    return false;\n  }\n  if (isNecessary) {\n    return features.indexOf(feature) !== -1;\n  }\n  return true;\n};\n\nconst currentFilter = {\n  type: 'any',\n  price: 'any',\n  rooms: 'any',\n  guests: 'any',\n  wifi: false,\n  dishwasher: false,\n  parking: false,\n  washer: false,\n  elevator: false,\n  conditioner: false,\n};\n\nconst filters = {\n  type: filterByType,\n  price: filterByPrice,\n  rooms: filterByRooms,\n  guests: filterByGuests,\n  wifi: filterByFeatures,\n  dishwasher: filterByFeatures,\n  parking: filterByFeatures,\n  washer: filterByFeatures,\n  elevator: filterByFeatures,\n  conditioner: filterByFeatures,\n};\n\nconst getFilteredOffers = () => {\n  const tempOffers =  offers.slice().filter((offer) => {\n    for (let key in currentFilter) {\n      if (!filters[key](offer, currentFilter[key], key)) {\n        return false\n      }\n    }\n    return true;\n  });\n  return tempOffers;\n};\n\nfilterForm.addEventListener('change', (evt) => {\n  const tagName = evt.target.tagName;\n  if (tagName === 'SELECT') {\n    const key = evt.target.name.split('-')[1];\n    currentFilter[key] = evt.target.value;\n  } else if (tagName === 'INPUT') {\n    const key = evt.target.value;\n    currentFilter[key] = evt.target.checked ? true : false;\n  }\n  const tempOffers = getFilteredOffers();\n  debounce(refreshMarkers, tempOffers);\n});\n\nexport {resetFilterForm};\n","// от min до max включительно\nconst getRandomInteger = (min, max) => {\n  if (min > max) {\n    [min, max] = [max , min];\n  }\n  let rand = min + Math.random() * (max + 1 - min);\n  return Math.floor(rand);\n};\n\n// от min до max включительно\nconst getRandomFloating = (min, max, digits) => {\n  if (min < 0 || max < 0 || digits == 0) {\n    return -1;\n  }\n  if (min > max) {\n    [min, max] = [max , min];\n  }\n  return (Math.random() * (max - min) + min).toFixed(digits);\n};\n\nconst getRandomArrayElement = (array) => array[getRandomInteger(0, array.length - 1)];\n\n// Случайный подмассив. Значения не повторяются\nconst getRandomSubArray = (array) => {\n  const randomSubArray = array.slice();\n  const randomLength = getRandomInteger(0 , randomSubArray.length);\n  const difference = randomSubArray.length - randomLength;\n  for (let i = 0; i < difference; i++) {\n    randomSubArray.splice(getRandomInteger(0, randomSubArray.length - 1), 1);\n  }\n  return randomSubArray;\n};\n\n// Предупреждение при проблемах с загрузкой данных\nconst showAlert = (message) => {\n  const alert = document.createElement('DIV');\n  alert.textContent = message;\n  alert.style.position = 'fixed';\n  alert.style.zIndex = 1000;\n  alert.style.top = 0;\n  alert.style.left = 0;\n  alert.style.right = 0;\n  alert.style.padding = '5px';\n  alert.style.background = '#f00';\n  alert.style.fontSize = '16px';\n  alert.style.color = '#fff';\n  alert.style.textAlign = 'center';\n  document.body.appendChild(alert);\n  setTimeout(() => {\n    document.body.removeChild(alert);\n  }, 5000);\n};\n\nconst debounce = (func, data) => {\n  const milliseconds = 500;\n  if (window.lastTimeout) {\n    window.clearTimeout(window.lastTimeout);\n  }\n  window.lastTimeout = window.setTimeout(() => {\n    func(data);\n  }, milliseconds);\n};\n\nexport {getRandomInteger, getRandomFloating, getRandomArrayElement, getRandomSubArray, showAlert, debounce};\n","import {resetMainForm} from './mainForm.js';\nimport {resetFilterForm} from './filterForm.js';\nimport {resetMainMarker} from './map.js';\n\nconst mainForm = document.querySelector('.ad-form');\nconst filterForm = document.querySelector('.map__filters');\n\nconst PAGE_DISABLED_CLASS = 'ad-form--disabled';\n\nconst deactivateMainForm = () => {\n  mainForm.classList.add(PAGE_DISABLED_CLASS);\n  Array.from(mainForm.children).forEach((element) => {\n    element.setAttribute('disabled', '');\n  });\n};\n\nconst activateMainForm = () => {\n  mainForm.classList.remove(PAGE_DISABLED_CLASS);\n  Array.from(mainForm.children).forEach((element) => {\n    element.removeAttribute('disabled', '');\n  });\n};\n\nconst deactivateFilterForm = () => {\n  filterForm.classList.add(PAGE_DISABLED_CLASS);\n  Array.from(filterForm.children).forEach((element) => {\n    element.setAttribute('disabled', '');\n  });\n};\n\nconst activateFilterForm = () => {\n  filterForm.classList.remove(PAGE_DISABLED_CLASS);\n  Array.from(filterForm.children).forEach((element) => {\n    element.removeAttribute('disabled', '');\n  });\n};\n\nconst setPageToDefault = () => {\n  resetMainForm();\n  resetFilterForm();\n  resetMainMarker();\n};\n\ndeactivateMainForm();\ndeactivateFilterForm();\n\nexport {deactivateMainForm, activateMainForm, deactivateFilterForm, activateFilterForm, setPageToDefault};\n","const offerTemplate = document.querySelector('#card').content.querySelector('.popup');\n\nconst RussianTypes = {\n  'flat': 'Квартира',\n  'bungalow': 'Бунгало',\n  'house': 'Дом',\n  'palace': 'Дворец',\n  'hotel': 'Отель',\n};\n\nconst getOfferPhotos = (offerPhotos, data) => {\n  if (!data) {\n    offerPhotos.remove();\n    return;\n  }\n  offerPhotos.innerHTML = '';\n  data.forEach((photoSrc) => {\n    const imgCopy = document.createElement('img');\n    imgCopy.src = photoSrc;\n    imgCopy.width = '45';\n    imgCopy.height = '40';\n    imgCopy.alt = 'Фотография жилья';\n    offerPhotos.appendChild(imgCopy);\n  });\n};\n\nconst getOfferFeatures = (offerFeatures, data) => {\n  if (!data) {\n    offerFeatures.remove();\n    return;\n  }\n  offerFeatures.innerHTML = '';\n  data.forEach((item) => {\n    const feature = document.createElement('li');\n    feature.classList.add('popup__feature', `popup__feature--${item}`);\n    offerFeatures.appendChild(feature);\n  });\n};\n\nconst getOfferElement = (data) => {\n  const offerElement = offerTemplate.cloneNode(true);\n\n  const offerTitle = offerElement.querySelector('.popup__title');\n  const offerAddress = offerElement.querySelector('.popup__text--address');\n  const offerPrice = offerElement.querySelector('.popup__text--price');\n  const offerType = offerElement.querySelector('.popup__type');\n  const offerCapacity = offerElement.querySelector('.popup__text--capacity');\n  const offerTime = offerElement.querySelector('.popup__text--time');\n  const offerFeatures = offerElement.querySelector('.popup__features');\n  const offerDescription = offerElement.querySelector('.popup__description');\n  const offerPhotos = offerElement.querySelector('.popup__photos');\n  const offerAvatar = offerElement.querySelector('.popup__avatar');\n\n  offerTitle.textContent = data.offer.title;\n  offerAddress.textContent = data.offer.address;\n  offerPrice.innerHTML = `${data.offer.price} <span>₽/ночь</span>`;\n  offerType.textContent = RussianTypes[data.offer.type];\n  offerCapacity.textContent = `${data.offer.rooms} комнат для ${data.offer.guests} гостей`;\n  offerTime.textContent = `Заезд после ${data.offer.checkin}, выезд до ${data.offer.checkout}`;\n  getOfferFeatures(offerFeatures, data.offer.features);\n  offerDescription.textContent = data.offer.description;\n  getOfferPhotos(offerPhotos, data.offer.photos);\n  offerAvatar.src = data.author.avatar ? data.author.avatar : '../img/avatars/default.png';\n  return offerElement;\n};\n\nexport {getOfferElement};\n","import {showAlert} from './utils.js';\nimport {activateMainForm, activateFilterForm} from './page.js';\nimport {setAddress} from './mainForm.js';\nimport {getData} from './api.js';\nimport {getOfferElement} from './offer.js';\n\nconst mapElement = document.querySelector('#map-canvas');\n\nconst renderedMarkers = [];\n\nconst CITY_CENTER = {\n  lat: 35.68555,\n  lng: 139.75555,\n};\n\nconst mainPinIcon = window.L.icon({\n  iconUrl: '../img/main-pin.svg',\n  iconSize: [52, 52],\n  iconAnchor: [26, 52],\n});\n\nconst pinIcon = window.L.icon({\n  iconUrl: '../img/pin.svg',\n  iconSize: [40, 40],\n  iconAnchor: [20, 40],\n});\n\nconst refreshMarkers = (offers) => {\n  const tempOffers = offers.slice(0, 10);\n  if (renderedMarkers.length !== 0) {\n    renderedMarkers.forEach((marker) => {\n      marker.remove();\n    });\n  }\n  tempOffers.forEach((offer) => {\n    const marker = window.L.marker(\n      {\n        lat: offer.location.lat,\n        lng: offer.location.lng,\n      },\n      {\n        icon: pinIcon,\n      },\n    );\n    marker\n      .addTo(map)\n      .bindPopup(getOfferElement(offer));\n    renderedMarkers.push(marker);\n  });\n};\n\nconst resetMainMarker = () => {\n  mainMarker.setLatLng(CITY_CENTER);\n  setAddress(CITY_CENTER);\n};\n\nconst map = window.L.map(mapElement)\n  .on('load', () => {\n    activateMainForm();\n    getData(\n      (offers) => {\n        refreshMarkers(offers);\n        activateFilterForm();\n      },\n      (message) => showAlert(message),\n    );\n  })\n  .setView(CITY_CENTER, 13);\n\nwindow.L.tileLayer(\n  'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  {\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors',\n  },\n).addTo(map);\n\nconst mainMarker = window.L.marker(\n  CITY_CENTER,\n  {\n    draggable: true,\n    icon: mainPinIcon,\n  },\n);\nmainMarker.addTo(map);\nresetMainMarker();\n\nmainMarker.on('move', () => {\n  const lat = mainMarker.getLatLng().lat.toFixed(5);\n  const lng = mainMarker.getLatLng().lng.toFixed(5);\n  setAddress({lat, lng});\n});\n\nexport {resetMainMarker, refreshMarkers};\n"],"names":["offers","successPopup","document","querySelector","content","errorPopup","bodyElement","showErrorPopup","appendChild","removePopups","remove","window","addEventListener","evt","code","style","zIndex","mainForm","formReset","housingTitle","housingPrice","housingType","housingTimeIn","housingTimeOut","housingAddress","housingRoomNumber","housingCapacity","avatarInput","avatarImage","housingInput","housingImages","FILE_TYPES","MinPricesOfTypes","adjustPrice","minValue","value","currentValue","placeholder","min","setCustomValidity","reportValidity","adjustTime","target","id","adjustCapacity","rooms","capacity","setAddress","lat","lng","valueLength","length","onSuccess","onError","body","preventDefault","setPageToDefault","FormData","fetch","method","then","response","ok","Error","catch","file","files","fileName","name","toLowerCase","some","fileType","endsWith","reader","FileReader","src","result","readAsDataURL","housingImage","createElement","width","height","alt","filterForm","filterByFeatures","offer","isNecessary","feature","features","indexOf","currentFilter","type","price","guests","wifi","dishwasher","parking","washer","elevator","conditioner","filters","tagName","key","split","checked","tempOffers","slice","filter","func","data","refreshMarkers","lastTimeout","clearTimeout","setTimeout","PAGE_DISABLED_CLASS","reset","resetMainMarker","classList","add","Array","from","children","forEach","element","setAttribute","offerTemplate","RussianTypes","mapElement","renderedMarkers","CITY_CENTER","mainPinIcon","L","icon","iconUrl","iconSize","iconAnchor","pinIcon","marker","location","addTo","map","bindPopup","offerElement","cloneNode","offerTitle","offerAddress","offerPrice","offerType","offerCapacity","offerTime","offerFeatures","offerDescription","offerPhotos","offerAvatar","textContent","title","address","innerHTML","checkin","checkout","item","getOfferFeatures","description","photoSrc","imgCopy","getOfferPhotos","photos","author","avatar","getOfferElement","push","mainMarker","setLatLng","on","removeAttribute","message","alert","position","top","left","right","padding","background","fontSize","color","textAlign","removeChild","showAlert","json","status","setView","tileLayer","attribution","draggable","getLatLng","toFixed"],"sourceRoot":""}